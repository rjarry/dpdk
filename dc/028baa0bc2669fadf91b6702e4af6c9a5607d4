v4:

* Replaced the unnamed union with helper inline functions.

v3:

* Added __extension__ to the unnamed struct inside the union.
* Fixed C++ header checks.
* Replaced alignas() with an explicit static_assert.
