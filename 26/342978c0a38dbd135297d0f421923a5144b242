v2: use inline union to fix -Wincompatible-pointer-types
