v3: replace memcpy() with direct struct assignments
